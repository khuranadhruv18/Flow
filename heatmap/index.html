<!DOCTYPE html>
<html>
<head>
    <title>Flow reader</title>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>

<div class="container">
    <canvas id="canvas" width="1000" height="4000"></canvas>
</div>
<script src="simpleheat.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.js"></script>
<script>
    "use strict";
    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                                   window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

    function get(id) {
        return document.getElementById(id);
    }

    var heat = simpleheat('canvas').max(18), frame;
    heat.radius(200, 50);

    function draw() {
        console.time('draw');
        heat.draw();
        console.timeEnd('draw');
        frame = null;
    }

    draw();

    $('.container').scroll(function(event) {
        let top = event.target.scrollTop;
        let height = event.target.clientHeight;
        let width = event.target.clientWidth;
        let bottom = top + height;
        console.log(top + ' - ' + bottom);
        heat.add([width/2, top+height/2, 1]);
        frame = frame || window.requestAnimationFrame(draw);

    })


</script>

</body>
</html>
